<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Real-Time Audio Transcriber</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; padding: 12px; width: 380px; }
    h2 { margin: 0 0 8px; }
    #status { color:#555; margin:6px 0; }
    #timer { font-variant-numeric: tabular-nums; margin: 0 0 10px; }
    #log { height: 260px; overflow: auto; border: 1px solid #ddd; padding: 8px; background:#fafafa; white-space: pre-wrap; }
    .row { margin-bottom: 8px; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    button { padding: 6px 10px; cursor: pointer; }
    input[type="password"], input[type="text"] { width: 240px; font-family: monospace; }
    label { font-size: 12px; color:#333; }
    small.muted { color:#777; }
    .muted { color:#777; }
  </style>
</head>
<body>
  <h2>Audio Transcriber</h2>

  <div class="row" aria-label="API Key">
    <label>Gemini API key:</label>
    <input id="apiKeyInput" type="password" placeholder="AIzaSyCINu-TpEMvAx_zydee_17MaVrk5RLYXnw" aria-label="Gemini API key" />
    <button id="saveKeyBtn" type="button" aria-label="Save API key">Save Key</button>
    <label style="margin-left:4px;"><input id="showKeyChk" type="checkbox" /> Show</label>
    <small id="keyStatus" class="muted"></small>
  </div>

  <div class="row" aria-label="Capture options">
    <label>Window:</label>
    <select id="windowSel" aria-label="Window length">
      <option value="30">30s</option>
      <option value="60">60s</option>
      <option value="90">90s</option>
    </select>
    <label>Send every</label>
    <select id="sendEverySel" aria-label="Send every Nth window">
      <option value="1">window</option>
      <option value="2">2nd window</option>
      <option value="3">3rd window</option>
    </select>
    <label><input id="micToggle" type="checkbox" /> Include microphone</label>
  </div>

  <div class="row" aria-label="Controls">
    <button id="startBtn" aria-label="Start recording">Start</button>
    <button id="pickTabBtn" aria-label="Pick a Chrome tab">Pick tabâ€¦</button>
    <button id="pauseBtn" disabled aria-label="Pause recording">Pause</button>
    <button id="stopBtn" disabled aria-label="Stop recording">Stop</button>
    <span id="tabLabel" class="muted"></span>
  </div>

  <div id="status">Idle</div>
  <div id="timer">00:00</div>

  <div id="log"></div>

  <div class="row" aria-label="Export">
    <button id="copyBtn">Copy</button>
    <button id="downloadTxtBtn">Download .txt</button>
    <button id="downloadJsonBtn">Download .json</button>
    <button id="retryBtn">Retry failed uploads</button>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
